<div class="eqLogic eqLogic-widget allowResize allowReorderCmd jeeHistoGraph #custom_layout# #eqLogic_class# #class#"
    data-eqType="#eqType#" data-eqLogic_id="#id#" data-eqLogic_uid="#uid#" data-version="#version#"
    style="width: #width#;height: #height#;#style#; display: flex; flex-direction: column; overflow: hidden;">
    <center class="widget-name" style="flex: 0 0 auto; padding: 5px 0; font-size: 0.9em;">
        <span class="reportModeVisible">#name_display# <span class="object_name">#object_name#</span></span>
        <a href="#eqLink#" class="reportModeHidden">#name_display# <span class="object_name">#object_name#</span></a>
    </center>

    <style>
        .jeeHistoGraph { display: flex; flex-direction: column; overflow: hidden; height: 100%; width: 100%; }
        .jeeHistoGraph .graphs-container { flex: 1; min-height: 0; overflow: hidden; display: grid; gap: 6px; padding: 0 4px 4px; box-sizing: border-box; }
        .jeeHistoGraph .graphs-container > div { min-height: 0; overflow: hidden; border-radius: 4px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .jeeHistoGraph .graphs-layout-1 { grid-template: 1fr / 1fr; }
        .jeeHistoGraph .graphs-layout-2 { grid-template: 1fr 1fr / 1fr; }
        .jeeHistoGraph .graphs-layout-3 { grid-template: 1fr 1fr / 1fr 1fr; }
        .jeeHistoGraph .graphs-layout-3 > div:nth-child(3) { grid-column: 1 / -1; grid-row: 2; }
        .jeeHistoGraph .graphs-layout-4 { grid-template: 1fr 1fr / 1fr 1fr; }
        .jeeHistoGraph .time-control-panel {
            flex: 0 0 auto; border-bottom: 1px solid #ddd; padding: 6px 10px; font-size: 0.85em;
            display: flex; align-items: center; gap: 10px; flex-wrap: nowrap; justify-content: space-between; z-index: 10;
        }
        .jeeHistoGraph .zoom-select { padding: 2px 6px; border: 1px solid #ccc; border-radius: 4px; font-size: 0.85em; }
        .jeeHistoGraph .time-slider { -webkit-appearance: none; height: 6px; border-radius: 3px; outline: none; }
        .jeeHistoGraph .time-slider::-webkit-slider-thumb { -webkit-appearance: none; width: 16px; height: 16px; border-radius: 50%; background: #3498db; cursor: pointer; }
        .jeeHistoGraph .time-slider::-moz-range-thumb { width: 16px; height: 16px; border-radius: 50%; background: #3498db; cursor: pointer; border: none; }

        /* Style boutons rangeSelector */
        .highcharts-range-selector-buttons text { fill: #ccc !important; font-size: 0.8em !important; }
        .highcharts-button-pressed text { fill: orange !important; font-weight: bold !important; }
    </style>

    <div class="graphs-container graphs-layout-#nbGraphs#" style="flex: 1; min-height: 0; overflow: hidden; display: grid; gap: 6px; padding: 0;">
        #graph_containers#
    </div>

    <script src="3rdparty/highstock/modules/exporting.js"></script>
    <script src="3rdparty/highstock/modules/offline-exporting.js"></script>
    <script src="3rdparty/highstock/modules/export-data.js"></script>

    <script>
        try {
            //Highcharts.setOptions({ time: { useUTC: false } });

            const uid = '#uid#';
            const nbGraphs = #nbGraphs#;
            const now = Date.now();

            function getInitialButtonIndex(zoom) {
                const map = { '30min': 0, '1h': 1, '1d': 2, '1w': 3, '1M': 4, '1y': 5, 'all': 6 };
                return map[zoom] ?? 6;
            }

            window.charts = window.charts || {};
            #chart_scripts#

        } catch(e) { console.error('Erreur Highcharts:', e); }
    </script>
</div>





